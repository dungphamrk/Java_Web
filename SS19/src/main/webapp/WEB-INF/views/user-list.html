<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Quản lý khách hàng</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    </head>
    <body>
        <div class="container">
            <h2>Quản lý khách hàng</h2>

            <div class="row mb-3">
                <div class="col-md-6">
                    <form th:action="@{/admin(section='user')}" method="get">
                        <div class="input-group">
                            <input type="text" class="form-control" name="search" th:value="${search}" placeholder="Tìm kiếm theo họ hoặc tên">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="submit">Tìm kiếm</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-6 text-right">
                    <a th:href="@{/admin/user/add}" class="btn btn-success">Thêm khách hàng</a>
                </div>
            </div>

            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Họ</th>
                        <th>Tên</th>
                        <th>Email</th>
                        <th>Số điện thoại</th>
                        <th>Địa chỉ</th>
                        <th>Ảnh</th>
                        <th>Trạng thái</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="user : ${users}">
                        <td th:text="${user.id}"></td>
                        <td th:text="${user.firstName}"></td>
                        <td th:text="${user.lastName}"></td>
                        <td th:text="${user.email}"></td>
                        <td th:text="${user.phoneNumber}"></td>
                        <td th:text="${user.address}"></td>
                        <td>
                            <img th:if="${user.fileImage}" th:src="${user.fileImage}" width="50" height="50"/>
                        </td>
                        <td th:text="${user.isActive} ? 'Kích hoạt' : 'Không kích hoạt'"></td>
                        <td>
                            <a th:href="@{/admin/user/edit/{id}(id=${user.id})}" class="btn btn-primary btn-sm">Sửa</a>
                            <a th:href="@{/admin/user/delete/{id}(id=${user.id})}" class="btn btn-danger btn-sm"
                               onclick="return confirm('Bạn có chắc muốn xóa khách hàng này?')">Xóa</a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="row">
                <div class="col-md-12">
                    <nav>
                        <ul class="pagination">
                            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                                <a class="page-link" th:href="@{/admin(section='user', page=${currentPage - 1}, pageSize=${pageSize}, search=${search})}">Trước</a>
                            </li>
                            <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                                th:classappend="${i == currentPage} ? 'active'">
                                <a class="page-link" th:href="@{/admin(section='user', page=${i}, pageSize=${pageSize}, search=${search})}" th:text="${i + 1}"></a>
                            </li>
                            <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                                <a class="page-link" th:href="@{/admin(section='user', page=${currentPage + 1}, pageSize=${pageSize}, search=${search})}">Tiếp</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </body>
</html>