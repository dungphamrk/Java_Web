<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Home - Bus Trips</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  </head>
  <body class="bg-gray-100">
    <div class="container mx-auto p-4">
      <h2 class="text-2xl font-bold mb-6 text-center">Danh sách chuyến xe</h2>

      <!-- Search Form -->
      <form th:action="@{/home}" method="get" class="mb-6">
        <div class="flex space-x-4">
          <div class="flex-1">
            <label class="block text-gray-700">Điểm đi</label>
            <input type="text" name="departurePoint" th:value="${departurePoint}" class="w-full p-2 border rounded">
          </div>
          <div class="flex-1">
            <label class="block text-gray-700">Điểm đến</label>
            <input type="text" name="destination" th:value="${destination}" class="w-full p-2 border rounded">
          </div>
          <div class="flex items-end">
            <button type="submit" class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600">Tìm kiếm</button>
          </div>
        </div>
      </form>

      <!-- Trips List -->
      <table class="w-full border-collapse border">
        <thead>
          <tr class="bg-gray-200">
            <th class="border p-2">ID</th>
            <th class="border p-2">Điểm đi</th>
            <th class="border p-2">Điểm đến</th>
            <th class="border p-2">Thời gian khởi hành</th>
            <th class="border p-2">Thời gian đến</th>
            <th class="border p-2">ID xe</th>
            <th class="border p-2">Số ghế trống</th>
            <th class="border p-2">Hình ảnh</th>
            <th class="border p-2">Hành động</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="trip : ${trips.content}">
            <td class="border p-2" th:text="${trip.id}"></td>
            <td class="border p-2" th:text="${trip.departurePoint}"></td>
            <td class="border p-2" th:text="${trip.destination}"></td>
            <td class="border p-2" th:text="${trip.departureTime}"></td>
            <td class="border p-2" th:text="${trip.arrivalTime}"></td>
            <td class="border p-2" th:text="${trip.busId}"></td>
            <td class="border p-2" th:text="${trip.seatsAvailable}"></td>
            <td class="border p-2">
              <img th:src="${trip.image}" alt="Bus Image" class="w-20 h-20 object-cover">
            </td>
            <td class="border p-2">
              <a th:href="@{/ticket/book/{tripId}(tripId=${trip.id})}" class="text-blue-500">Đặt vé</a>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Pagination -->
      <div class="mt-4 flex justify-center">
        <div th:if="${trips.totalPages > 1}">
          <a th:href="@{/home(page=${ CDM trips.number - 1}, departurePoint=${departurePoint}, destination=${destination})}"
             th:class="${trips.first} ? 'hidden' : 'px-3 py-1 bg-blue-500 text-white rounded mx-1'"
             th:text="'Previous'"></a>
          <span th:each="i : ${#numbers.sequence(0, trips.totalPages - 1)}">
                    <a th:href="@{/home(page=${i}, departurePoint=${departurePoint}, destination=${destination})}"
                       th:class="${i == trips.number} ? 'px-3 py-1 bg-gray-300 rounded mx-1' : 'px-3 py-1 bg-blue-500 text-white rounded mx-1'"
                       th:text="${i + 1}"></a>
                </span>
          <a th:href="@{/home(page=${trips.number + 1}, departurePoint=${departurePoint}, destination=${destination})}"
             th:class="${trips.last} ? 'hidden' : 'px-3 py-1 bg-blue-500 text-white rounded mx-1'"
             th:text="'Next'"></a>
        </div>
      </div>
    </div>
  </body>
</html>